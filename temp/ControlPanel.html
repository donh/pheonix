<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href = "http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
		<style>
			body {
				position: right;
				width:1024px;
			}
		</style>
		<script>
			var uid = 1;
			var MemberApp = angular.module('MemberApp', []);
			MemberApp.controller('MemberCtrl', function($scope) {
				$scope.members = [
					{ code : 16 ,'name' : '程昌興','grade': '3.1','position': '指揮官'  },
					{ code : 17 ,'name' : '黃炳松','grade': '2.4','position': '副指揮官'},
					{ code : 18 ,'name' : '蔡三榮','grade': '2.3','position': '安全官'  },
					{ code : 18 ,'name' : '陳文暘','grade': '2.3','position': '安全官'  },
					{ code : 163,'name' : '林鉦凱','grade': '1.3','position': '連絡官'  },
					{ code : 163,'name' : '王穎齊','grade': '1.3','position': '連絡官'  },
					{ code : 163,'name' : '吳泊諭','grade': '1.3','position': '連絡官'  },
					{ code : 163,'name' : '邱仕謀','grade': '1.3','position': '連絡官'  },
					{ code : 164,'name' : '許智緯','grade': '1.4','position': '小隊長'  },
					{ code : 164,'name' : '吳偉嘉','grade': '1.4','position': '小隊長'  },
					{ code : 164,'name' : '劉培昱','grade': '1.3','position': '水源官'  },
					{ code : 164,'name' : '吳佳贏','grade': '1.3','position': '水源官'  },
					{ code : 164,'name' : '林挺生','grade': '1.3','position': '水源官'  },
					{ code : 165,'name' : '洪秀昇','grade': '1.3','position': '後勤官'  },
					{ code : 165,'name' : '李晨維','grade': '1.3','position': '後勤官'  },
					{ code : 165,'name' : '陳成圳','grade': '1.3','position': '後勤官'  },
					{ code : 165,'name' : '蘇淑娟','grade': '1.3','position': '後勤官'  },
				];

				$scope.staffs = [
					{ id : 0, 'name' : '程昌興' , position : '指揮官'}
				];

				$scope.saveStaff = function(member) {
					console.log('member =', member);
					if ($scope.staff.id == null) {
						// if this new contact, add in contacts array
						$scope.staff.id = uid++;
						$scope.staffs.push($scope.staff);
					} else {
						//for existing contact, find this contact using id
						//and update it
						for (var i in $scope.staffs) {
							if ($scope.staffs[i].id == $scope.staff.id) {
								$scope.staffs[i] = $scope.staff;
							}
						}
					}
					//clear the add contact form
					$scope.staff = {};
				};
			});
		</script>
	</head>
	<body>
		<div ng-app="MemberApp" ng-controller="MemberCtrl">
			<div>
				<h3>作戰人員管控</h3>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>代號</th>
							<th>姓名</th>
							<th>職等</th>
							<th>編組</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="member in members">
							<td ng-model="staff.id">{{ member.code }}</td>
							<td ng-model="staff.name">{{ member.name }}</td>
							<td>{{ member.grade}}</td>
							<td ng-model="staff.position">{{ member.position }}</td>
							<input type="hidden"></td>
							<td>
							<button class="btn" ng-click="saveStaff(member)">
								出勤
							</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<hr>
			<div>
				<h3>上班人員</h3>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>代號</th>
							<th>姓名</th>
							<th></th>
							<th>管控時間</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="staff in staffs">
							<td>{{ staff.name }}</td>
							<td>{{ staff.position }}</td>
							<td>
								<button class="btn" ng-click="">執勤</button>
							</td>
							<td>
								GMT+8 19:00
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</body>
</html>